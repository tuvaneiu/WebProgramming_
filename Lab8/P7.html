<!DOCTYPE html>
<html>
<head>
	<title>Student Management System</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<script src="https://code.jquery.com/jquery-3.5.0.min.js"></script>

	<style type="text/css">
		#class-list{
			border: 1px solid black;
		}
		ul{
			padding-left: 60px;
		}
		h2{
			font-size: 50px;
			margin-top: 10px;
		}
		a{
			color: black;
		}
		a:hover{
			text-decoration: none;
			color: red;
		}
		#show-list{
			padding: 10px;
			border: 1px solid black;
		}
		#add-zone{
			border: 1px solid black;
		}
		#add-zone p{
			padding: 10px;
			margin: 0;
			background-color: #f7f7f7;
		}
		#fill-zone{
			padding: 10px;
		}
		#fill-zone input, select{
			margin-right: 20px;
		}
		#list-zone{
			margin-top: 20px;
		}
		#list-zone p{
			padding: 10px;
			margin: 0;
			background-color: #f7f7f7;
		}
	</style>
</head>
<body>
	<section class="container">
		<section class="row">
			<section class="col-md-3">
				<section id="class-list">
					<h2>Class list</h2>
					<ul>
						<li><a href="javascript:void(0)" onclick="loadc1()">Lớp 1</a></li>
						<li><a href="javascript:void(0)" onclick="loadc2()">Lớp 2</a></li>
					</ul>
				</section>
			</section>
			<section class="col-md-9">
				<section id="show-list">
					<section id="add-zone">
						<p>Edit student's information</p>
						<section id="fill-zone">
							<input type="text" name="id" id="id" placeholder="Id..." required>
							<input type="text" name="name" id="name" placeholder="Name..." required>
							<input type="email" name="email" id="email" placeholder="Email..." required>
							<select name="in-class" id="in-class">
								<option value="value1" selected="selected">Lớp 1</option>
								<option value="value2">Lớp 2</option>
							</select>
							<button id="update" onclick="updateInfo()">Update</button>
						</section>
					</section>
					<section id="list-zone">
						<p>Student List</p>
						<table class="table">
							<thead>
								<tr>
									<th scope="col">#</th>
									<th scope="col">Full Name</th>
									<th scope="col">Student ID</th>
									<th scope="col">Function</th>
								</tr>
							</thead>
							<tbody id="showing">
							</tbody>
						</table>
					</section>
				</section>
			</section>
		</section>
	</section>

	<script type="text/javascript">
		let list1 = [
			{Name: 'Tú Văn',Id: 'a009',Email: 'tu@gmail.com',Class: 'value1'},
			{Name: 'Văn Văn',Id: 'a008',Email: 'van@gmail.com',Class: 'value1'},
			{Name: 'Văn Tú',Id: 'a007',Email: 'vantu@gmail.com',Class: 'value1'},
		];
		let list2 = [
			{Name: 'Katarina',Id: 'a006',Email: 'ka@gmail.com',Class: 'value2'},
			{Name: 'John Cena',Id: 'a005',Email: 'cena@gmail.com',Class: 'value2'},
			{Name: 'Jayce',Id: 'a004',Email: 'jay@gmail.com',Class: 'value2'},
		];


		let listNum = 0;
		let bod = document.getElementById("showing");

		function loadc1() {
			bod.innerHTML = loadList(list1);
			listNum = 1;
		}
		function loadc2() {
			bod.innerHTML = loadList(list2);
			listNum = 2;
		}

		function loadList(list) {
			var str = "";
			for (var i = 0; i < list.length; i++) {
				str+=`
				<tr>
					<th scope="row">${i+1}</th>
					<td>${list[i].Name}</td>
					<td>${list[i].Id}</td>
					<td>
						<button class="edit" onclick="edit(this)">Edit</button>
						<button class="del" onclick="remove(this)">Delete</button>
					</td>
				</tr>
				`;
			}
			return str;
		}

		function remove(ele) {
			var index = (parseInt(ele.closest("tr").cells[0].innerHTML)) - 1;
			if (listNum == 1) {
				list1.splice(index, 1);
				loadc1();
			}
			if (listNum == 2) {
				list2.splice(index, 1);
				loadc2();
			}
			ele.closest("tr").remove();
		}

		let name = document.getElementById("name");
		let id = document.getElementById("id");
		let email = document.getElementById("email");
		let inClass = document.getElementById("in-class");
		let update = document.getElementById("update");

		let indexEdit = 0;

		function edit(ele) {
			indexEdit = (parseInt(ele.closest("tr").cells[0].innerHTML)) - 1;
			if (listNum == 1) {
				inListEdit(list1, indexEdit);
			}
			if (listNum == 2) {
				inListEdit(list2, indexEdit);
			}
		}

		function inListEdit(list, index) {
			name.value = list[index].Name;
			id.value = list[index].Id;
			email.value = list[index].Email;
			inClass.value = list[index].Class;
		}

		function updateInfo() {
			if (listNum == 1) {
				list1[indexEdit].Name = name.value;
				list1[indexEdit].Id = id.value;
				list1[indexEdit].Email = email.value;
				list1[indexEdit].Class = inClass.value;
				if (inClass.value == "value2") {
					list2.unshift({Name: name.value, Id: id.value, Email: email.value, Class: inClass.value});
					list1.splice(indexEdit, 1)
				}
				loadc1();
			}
			if (listNum == 2) {
				list2[indexEdit].Name = name.value;
				list2[indexEdit].Id = id.value;
				list2[indexEdit].Email = email.value;
				list2[indexEdit].Class = inClass.value;
				if (inClass.value == "value1") {
					list1.unshift({Name: name.value, Id: id.value, Email: email.value, Class: inClass.value});
					list2.splice(indexEdit, 1)
				}
				loadc2();
			}
			name.value = "";
			id.value = "";
			email.value = "";
			inClass.value = "value1";
		}
	</script>
</body>
</html>